## 17-문서 객체 모델(DOM)
- 자바스크립트는 웹 문서와 그 안에서 사용한 텍스트, 이미지, 표 등의 모든 요소를 각각 다른 객체로 인지하여 처리한다. 이렇게 자바스크립트에서 웹 문서의 객체를 다루는 시스템을 '문서 객체 모델'이라고 한다. 

### 문서 객체 모델 알아보기
- 자바스크립트를 공부하다 보면 'DOM' 이란 말을 자주 만날 것이다. DOM은 문서 객체 모델(document object model)의 줄임말이다. 문서 객체 모델은 자바스크립트 프로그래밍에서 매우 중요한 개념이다

#### 문서 객체 모델이란
- 웹에서 자바스크립트를 사용하는 이유는 어떤 조건에 맞거나 사용자의 동작이 있을 때 웹 문서 전체 또는 일부분이 동적으로 반응하게 하는 것이다. 이렇게 반응하게 하려면 웹 문서의 모든 요소를 따로 제어할 수 있어야 한다.
- 예를 들어 웹 문서의 텍스트와 이미지가 들어 있다면 웹 브라우저 마크업 정보를 보면서 텍스트 단락이 몇 개이고 그 내용이 무엇인지 살펴보자. 또한 이미지가 몇 개이고 이미지 파일 경로는 어떠한지 대체 텍스트는 무엇인지도 파악해서 이미지별로 정리해서 인식한다. 그리고 이러한 텍스트와 이미지 요소를 브라우저가 제어하려면 두 요소를 따로 구별하여 인식해야 한다. 이보다 더 많은 요소를 사용한 웹 문서라면 요소 사이의 포함 관계도 알아야 한다.
- 이러한 모든 정보 요소를 자바스크립트로 가져와 프로그래밍 할때 사용한다. 이때 알아야할 개념이 바로 문서 객체 모델이다. 
```
문서 객체 모델(DOM)의 정의
자바스크립트를 이용하여 웹 문서에 접근하고 제어할 수 있도록 객체를 사용해 웹 문서를 체계적으로 정리하는 방법 
```
- HTML 언어로 작성한 웹 문서의 DOM을 HTML DOM이라고 하며, XML 문서에서 사용하는 XML DOM도 있다.
- DOM은 웹 문서를 하나의 객체로 정의한다. 그리고 웹 문서를 이루는 텍스트나 이미지, 표 등의 모든 요소도 각각 객체로 정의한다. 예를 들어 웹 문서 전체는 document 객체이고, 삽입한 이미지는 image 객체이다. 이처럼 DOM은 웹 문서와 그 안의 모든 요소를 '객체'로 인식하고 처리한다.

#### DOM트리
- 자바스크립트로 DOM을 조작하려면 실제 웹 문서가 DOM으로 어떻게 표현되는지 알아야 한다. DOM은 웹 문서의 요소를 부모 요소와 자식 요소로 구분한다. 
```HTML
<!DOCTYPE html> <html lang="ko"> 
<head>
<meta charset="UTF-8">
<title>D0M Tree 알0|■보기</title> 
</head>
<body>  
<hl>Do it!</hl>  
<img src="images/doit.jpg" alt="공부하는 이미지">
</body> 
</html>
```
- 다음 그림은 위 스크립트 요소의 부모 자식 관계를 정리한 것이다.![[스크린샷 2022-10-11 오전 10.04.14.png]]
- 한 단계 더 발전하여 DOM의 관전에서 부모 자식 관계를 생각해 보겠습니다. DOM은 문서 안의 요소뿐만 아니라 각 요소에서 사용한 내용과 속성도 자식으로 나타낸다.
![[스크린샷 2022-10-11 오전 10.08.32.png]]
- 이렇게 부모와 자식 구조로 표시하면 마치 나무 형태가 되므로 DOM트리 라고 한다. DOM트리에서 가지가 갈라져 나간 항목을 노드라고 하며, DOM트리의 시작 부분인 html 노드를 나무의 뿌리에 해당한다 해서 루트 노드라고 한다.
- 루트 노드를 시작으로 웹 문서에서 사용한 요소는 계층 구조를 이룬다. 따라서 각 노드 사이의 관계를 부모와 자식, 형제 간으로 표현할 수 있다. 부모 노드에는 자식노드가 있으면 부모 노드가 같은 형제 노드도 있다.
- DOM을 구성하는 기본 원칙을 다음과 같다
	1. 모든 HTML 태그는 요소(element) 노드 이다.
	2. HTML 태그에서 사용하는 텍스트 내용은 자식 노드인 텍스트 노드이다.
	3. HTML 태그에 있는 속성은 자식 노드인 속성 노드이다.
	4. 주석은 주석 노드이다.![[스크린샷 2022-10-11 오전 10.11.23.png]]
- 이렇게 웹 문서를 해석할 DOM 구조를 만드는 것이 중요하다. DOM트리를 머릿속으로 그릴 수 있어야 자바스크립트를 사용해서 객체에 접근해서 원하는 부분을 수정할 수 있기 때문이다.


## 17-2 DOM요소에 접근하고 속성 가져오기
- 웹 문서에서 사용한 이미지 가운데 하나만 골라서 크기를 바꾸려면 콕 집어 지정할 수 있어야 한다. 이렇게 웹 문서에서 원하는 요소를 찾아가는 것을 '접근한다'고 한다. 여기에서는 자바스크립트를 사용해 DOM에 접근하는 방법을 알아본다.

### DOM에 접근하기
- CSS에서는 class, id, 태그 등의 스타일을 각가 구별해서 정의해야 한다. 이때 class, id, 태그 등을 선택자 라고 한다. 이 선택자를 이용해서 DOM에 접근하는 방법을 알아보자

#### id 선택자로 접근하는 getElementById( )메서드
- HTML 태그의 id 속성은 HTML 요소가 문서 안에서 중복되지 않도록 사용하는 CSS 선택자이다. 다음과 같이 getElementById( ) 메서드를 이용하면 특정한 id가 포함된 DOM 요소에 접근할 수 있다.
```
	기본형 요소명.getElementById("id명")
```

#### class값으로 접근하는 getElementsByClassName( )메서드
- getElementsByClassName( ) 메서드는 지정한 class 선택자 이름이 들어 있는 DOM 요소에 접근한다.
```
	기본형 요소명.getElementsByClassName("class명")
```
- class 선택자는 웹 문서 안의 여러 요소에서 사용할 수 있으므로 getElementsByClassName( )메서드를 사용하면 반환하는 요소가 2개 이상일 수 있다. 그래서 이 메서드 이름에는 반환 요소가 여러 개라는 뜻에서 Element에 s를 붙인 것이다.
- getElementsByIdClassName( ) 메서드를 사용하게 되면 클래스 이름이 같은 DOM 요소들이 HTMLCollection 객체로 저장된다. HTMLCollection 객체는 배열과 비슷하고 배열처럼 사용할 수 있다. 하지만 배열은 아니다.

#### 태그 이름으로 접근하는 getElementsByTagName( )메서드
- class나 id를 지정하지 않은 DOM 요소에 접근하려면 태그를 이용한다. getElementsByTagName( )메서드는 다음과 같이 지정한 태그명을 사용한 DOM요소에 접근할 수 있다.
```
	기본형 요소명.getElementsByTagName("태그명")
```
- 웹 문서 안에서 같은 태그를 사용하는 요소가 2개 이상일 수 있으므로 getElementsByTagName( )메서드가 반환하는 값도 HTMLCollection 형태로 저장된다.

#### 다양한 방법으로 접근하는 querySelector( ), querySelectionAll( )메서드
- DOM 트리의 텍스트, 속성 노드까지 자유롭게 제어하려면 querySelector( ), querySelectorAll( ) 메서드를 사용해야 한다. id 선택자처럼 반환값이 하나라면 querySelector( )메서드를 사용하고 class 선택자나 태그 이름을 사용하여 어러 값이 한꺼번에 반환될 경우에는 querySelectorAll( )메서드를 사용한다.
```
	기본형 노드.querySelector(선택자)
		  노드.querySelectorAll(선택자 또는 태그)
```
- querySelector( ), querySelectorAll( ) 메서드에서 선택자를 표시할 때 id 이름 앞에는 해시(#) 기호를 붙이고, class 이름 앞에는 마침표(.)을 붙인다. 태그는 기호없이 태그명만 쓰면 된다.
- querySelector( ) 메서드에서 class 이름으로 접근할 때는 class 이름을 사용한 여러 요소 중에서 첫 번째 요소만 반환한다.
- querySelector( ), querySelectorAll( ) 메서드의 반환값은 노드이거나 노드 리스트이다. 노드 리스트는 노드를 한꺼번에 여러 개 저장한 것으로 배열과 비슷하고 생각하면 된다.

### 웹 요소의 내용을 수정하는 innerText, innerHTML 프로퍼티
- 자바스크립트에서는 웹 요소의 내용도 수정할 수 있다. 가장 쉬운 방법은 innerText 프로퍼티나 innerHTML 프로퍼티를 이용하는 것이다.
- innerText 프로퍼티는 텍스트 내용을 표시하고 innerHTML 프로퍼티는 HTML 태그까지 반영하여 표시한다.
```
	기본형 요소명.innerText = 내용
	     요소명.innerHTML = 내용
```

### 속성을 가져오거나 수정하는 getAttribute(), setAttribute( ) 메서드
- 웹 요소를 문서에 삽입할 때 태그 속성을 함께 사용하면 DOM 트리에 속성 노드가 추가되면서 속성값이 저장된다. 이때 속성에 접근하려면 getAttribute( ) 메서드를 사용하고, 접근한 속성의 값을 바꾸려면 setAttribute( ) 메서드를 사용한다.
- 속성을 가져오려면 다음과 같이 getAttribute( ) 메서드에서 속성명을 지정한다.
```
	기본형 getAttribute("속성명")
```
- setAttribute( ) 메서드를 사용하면 원하는 속성값으로 지정할 수 있다. 속성값이 이미 있다면 새로운 속성값으로 수정하고, 아직 해당 속성이 없다면 속성과 속성값을 새로 추가한다.
```
	기본형 setAttribute("속성명", "값")
```

## 17-3 DOM에서 이벤트 처리하기
- 웹 문서에서 이벤트가 발생하면 이벤트 처리기(event handler)를 연결해야 한다. HTML 태그에서 이벤트 처리기를 연결할 수도 있지만 태그와 스크립트 소스가 섞여 있어서 복잡한 프로그램에는 적합하지 않다. 이럴 때 DOM에서 이벤트 처리기를 연결하면 HTML 태그와 스크립트 소스를 분리할 수 있다.

### DOM 요소에 함수 직접 연결하기
- 이벤트 처리기 함수가 간단하다면 DOM요소에 직접 연결할 수 있다.

### 함수 이름을 사용해 연결하기
- 이벤트가 발생했을 때 실행할 함수로 따로 정의해 놓았다면 함수 이름을 사용해 연결할 수 있다. 이 경우에는 함수 이름 다음에 괄호(( ))를 추가하지 않는다.

### DOM의 event 객체 알아보기
- DOM에는 이벤트 정보를 저장하는 event 객체가 있다. 이 객체에는 웹 문서에서 이벤트가 발생한 요소가 무엇인지, 어떤 이벤트가 발생했는지 등의 정보가 들어 있다.
![[스크린샷 2022-10-12 오후 8.52.29.png]]![[스크린샷 2022-10-12 오후 8.52.39.png]]
- event 객체이는 이벤트 정보만 들어 있다. 만약 이벤트가 발생한 대상에 접근하려면 이벤트 처리기에서 예약어 this를 사용해야 한다.

### addEventListener( ) 메서드 사용하기
- 지금까지 살펴본 이벤트 처리기는 한 요소에 하나의 이벤트 처리기만 연결할 수 있었다. 하지만 다음과 같이 addEventListener( )메서드와 event 객체를 사용하면 한 요소에 여러 이벤트 처리기를 연결해 실행할 수 있다. addEventListener( ) 메서드는 끝에 세미콜론(;)을 꼭 붙여야 한다.![[스크린샷 2022-10-12 오후 8.55.26.png]]

### CSS 속성에 접근하기
- 자바스크립트를 이용하면 스타일 속성값을 가져와서 그 값을 원하는 대로 수정할 수 있다. 자바스크립트에서는 각 요소의 스타일을 자유롭게 수정할 수 있으므로 웹 문서에서 다양한 효과를 만들 수 있다. CSS 속성에 접근하려면 해당 스타일이 적용된 HTML 요소 다음에 예약어 style을 쓰고 속성을 적는다
```
	기본형 document.요소명.style.속성명
```
- 예를 들어 id가 desc인 요소의 글자를 파란색으로 변경하려면 다음과 같이 작성한다.
```
	document.getElementById("desc").style.color = "blue";
```
이렇게 color처럼 한 단어인 속성명은 그대로 사용하면 되지만 background-color, border-radius처럼 중간에 하이픈이 있는 속성은 backgroundColor이나 borderRadius처럼 두단어를 합쳐서 사용한다.


## 17-4 DOM에서 노드 추가, 삭제하기
- 웹 문서에서 처음 화면에는 내용이 보이지 않다가 클릭이나 이벤트가 발생하면 내용이 나타나는 경우가 있다. 이러한 동작은 CSS의 display 속성을 사용해서 만들 수도 있지만 DOM 트리에 새로운 노드를 추가하는 방법도 있다. 이때 주의할 점은, 노드를 추가하면 단순히 요소 노드뿐 아니라 텍스트와 속성 노드도 함께 추가해야 한다.

### 노드 리스트란
- DOM에서 새로운 노드를 만들어 추가하거나 삭제하려면 노드 리스트를 사용해야 한다.
- DOM에 접근할 때 querySelectorAll( ) 메서드를 사용하면 노드를 한꺼번에 여러 개 가져올 수 있다. 이때 노드 정보를 여러 개 저장한 것이 노드 리시트이다. 배열과 비슷하게 동작한다. 

### 텍스트 노드를 사용하는 새로운 요소 추가하기
- 여기에서는 \[더 보기] 링크를 클릭하면 그 아래에 간단한 텍스트가 표시되는 스크립트 소스를 작헝해 보겠다.
- 문서에는 단순히 \<p>태그 하나가 추가되어 보이지만 DOM에서는 여러 단계가 필요하다
1. 요소 노드 만들기 - createElement( )메서드
	- DOM에 새로운 요소를 추가할 때 가장 먼저 할 일은 요소 노드를 만드는 것이다. 이때 사용하는 메서드는 createElement( )인데 괄호 안에 해당하는 요소 노드를 만들면 된다.
	```
		기본형 document.createElement(노드명)
	```
	- 예를 들어 새로운 p 요소를 만든다면 다음과 같이 작성한다.
	```
		var newP = document.createElement("P");
	```
	- 하지만 createElement( ) 메서드는 새로운 노드를 만들 뿐 아직 웹 문서에 새로운 노드를 추가한 것은 아니다. 이제 \<p> 태그의 내용에 해당하는 텍스트 노드도 만들어야 한다.![[스크린샷 2022-10-12 오후 9.20.37.png]]
2. 텍스트 노드 만들기 createTextNode( )메서드
	- 새로운 요소 노드를 만들었다면 그 다음은 내용을 담는 텍스트 노드를 자식 노드로 만들어 연결해야 한다. 텍스트 노드를 만드는 메서드는 createTextNode( )이고 다음과 같은 형식으로 사용한다.
	```
		기본형 document.createTextNode(텍스트);
	```
	- 새롭게 만든 p 요소에 들어갈 내용이 있는 텍스트 노드 txtNode 변수로 저장한다.
	```
		var txtNode = document.createTextNode("텍스트");
	```
	![[스크린샷 2022-10-12 오후 9.21.27.png]]
3. 자식 노드 연결하기 appendChild( )메서드
	- 지금까지 새로운 p 노드와 사용할 텍스트 노드를 만들었다 아직까지는 노드를 만든 상태이며 부모 노드와 자식 노드로 연결되어 있지 않다.
	- appendChild( ) 메서드는 텍스트 노드나 속성 노드를 만든 후 요소 노드에 연결할 때 사용한다. 이때 appendChild( ) 메서드를 사용해서 연결하는 노드는 자식 노드 중 맨 끝에 추가된다.
	```
		기본형 부모노드.appendChild(자식노드)
	```
	- 다음은 텍스트 노드 txtNode를 요소 노드 newP의 자식 노드로 연결하고, newP 노드를 다시 \<div id="info">\</div>의 자식 노드로 연결한다.
	```javascript
		newP.appendChild(txtNode);
		document.getElementById("info").appendChild(newP);
	```
![[스크린샷 2022-10-12 오후 9.25.36.png]]
4. 전체 소스코드 완성하기
	- ![[스크린샷 2022-10-12 오후 9.26.39.png]]


### 속성값이 있는 새로운 요소 추가하기
- HTML 태그에서는 여러 가지 속성을 사용해서 웹 요소를 제어한다. 따라서 새로운 요소를 만들면 그와 관련된 속성 노드도 만들어서 자식 노드로 연결해야 한다.
- 앞의 예제에 이어서 링크를 클릭하면 그 아래 텍스트는 물론 이미지까지 표시되는 스크립트를 추가로 작성해 보겠다.
- 웹 문서에서 새 이미지를 보여 주려면 img 요소 노드를 추가한 후 src 속성 노드를 만들어 자식 노드로 연결해야 한다.
1. 요소 노드 만들기 createElement( )
	- 텍스트 노드를 추가했던 방법과 마찬가지로 createElement( ) 메서드를 사용해서 새로운 이미지 노드를 만든다.
2. 속성 노드 만들기 createAttribute( )
	- img 요소는 src 속성을 사용해서 이미지 파일의 경로를 지정해야 브라우저에 이미지를 보여 줄 수 있다. 그래서 createAttribute( )메서드를 사용해서 속성 노드를 만들어야 한다.
3. 속성 노드 연결하기 setAttributeNode( )
	- 속성 노드는 요소 노드의 자식으로 연결해야 한다. 새로 만든 속성 노드를 요소 노드에 추가하려면 setAttributeNode( ) 메서드를 사용한다.
4. 자식 노드 연결하기 appendChild( )
	- 속성 노드까지 연결했지만 아직 img 요소는 만들어 놓기만 한 상태이다. img 요소를 화면에 표시하려면 웹 문서의 DOM에 추가해야 한다. 그러려면 appendChild( ) 메서드를 사용해서 필요한 위치에 자식 노드로 추가하면 된다.
5.전체 소스코드 완성하기 ![[스크린샷 2022-10-12 오후 9.39.35.png]]