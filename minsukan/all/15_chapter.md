## 15-1 함수 알아보기
- 함수는 프로그래밍에서 가장 중요한 뼈대를 이룬다. 실제로 웹 브라우저에서는 함수를 사용해서 명령을 내리기 때문이다. 

### 여러 동작을 묶은 덩어리, 함수
- 자바스크립트 프로그램은 단순히 동작 하나만 실행되는게 아니라 여러 가지 동작이 연결된다. 이렇게 동작해야 할 목적대로 묶은 명령을 함수라고 한다. 함수를 사용하면 각 명령의 시작과 끝을 명확하게 구별할 수 있고, 묶은 기능에 이름을 붙여서 어디서든 같은 이름으로 명령을 실행할 수 있다.

### 함수는 왜 사용할까
- 개발자는 프로그래밍을 할 때 alert() 함수처럼 자바스크립트에 들어 있는 함수를 가져다 사용하거나, 자신이 필요한 명령을 직접 함수로 만들어 사용한다.

### 함수 선언 및 호출
- 함수를 사용하는 가장 기본적인 방법은 함수를 만들 때 이름을 붙이고 필요할 때마다 함수 이름을 사용해서 싱하는 것이다. 함수가 어떤 명령을 처리할지 미리 알려 주는 것을 함수를 선언한다 또는 함수를 정의한다고 한다. 함수를 선언할 때는 함수마다 서로 다른 이름을 붙여 나중에 사용할 때 알아보기 쉽도록 한다. 함수를 선언할 때는 다음과 같이 예약어 function을 사용하고, 중괄호({ }) 안에 실행할 여러 명령을 넣는다.
```
	기본형 function 함수명( ) {
			명령
		}
```
- 하지만 프로그램에서는 함수를 선언하는 것만으로는 함수가 실행되지 않는다. 함수를 선언한 후에 따로 실행하는 코드를 작성해야 한다. 함수를 실행하려면 다음과 같이 미리 선언한 함수명을 써서 사용한다. 이렇게 선언한 함수를 사용하는 것을 함수를 호출한다. 또는 함수를 실행한다고 한다.
```
	기본형 함수명( ) 또는 함수명(변수)
```

## 15-2 var를 사용한 변수의 특징
- 자바스크립트 ES6 버전에서는 변수를 선언하기 위해 let과 const라는 새로운 예약어가 생겼다. 기존에 var가 있는데 왜 let과 const가 필요했을까?

### 변수의 적용 범위 스코프 알아보기
- 자바스크립트에서 변수를 선언하고 사용할 때 변수가 적용되는 범위를 스코프 라고 한다. 변수가 어디까지 유효한지 번위를 가리키는 영역이 필요한 것이다. 자바스크립트 함수에서 변수를 사용할 때는 이 영역에 주의해야 한다.
- 한 함수 안에서만 사용하고 다른 함수에서는 사용할 수 없는 변수가 있는가 하면, 어느 함수에서나 다 사용할 수 있는 변수가 있다. 한 함수에서만 사용할 수 있는 변수를 지역 변수 또는 로컬 변수라고 하고, 스크립트 소스 전체에서 사용할 수 있는 변수를 전역변수 또는 글로벌 변수 라고 한다.
#### 함수 안에서만 쓸 수 있는 지역 변수
- 지역 변수는 함수 안에선 선언하고 함수 안에서만 사용한다. 지역 변수를 선언하려면 예약어 var과 함께 변수 이름을 지정해야 한다.
#### 스크립트 안에서 자유롭게 쓸 수 있는 전역 변수
- 전역 변수는 적용 범위를 제한하지 않고 쓸 수 있다. 즉, 전역 변수는 지역 변수와 달리 스크립트 소스코드 전체에서 사용할 수 있다.
- 전역 변수로 사용하려면 함수 밖에서 선언하거나 함수 안에서는 var예약어를 빼고 선언해야 한다. 함수 안에서 선언한 변수라 하더라고 var 예약어를 사용하지 않으면 전역 변수가 된다.

### var과 호이스팅
- 자바스크립트에서 변수를 사용할 때 조심해야 할 개념이 있다. 바로 호이스팅 이다. 호이스팅이란 '끌어올린다'를 뜻한다. 상황에 따라 변수의 선언과 할당을 분리해서 선언 부분을 스코프의 가장 위쪽으로 끌어올린다는 것이다. 끌어올린다고 해서 실제 소스 코드를 끌어올리는 것이 아니고 그런 식으로 해석한다는 의미이다.

### 변수의 재선언과 재할당
- var를 사용한 변수는 호이스팅 외에도 재선언과 재할당을 할 수 있다.


## 15-3 let과 const의 등장
- var 예약어를 사용하는 변수는 함수 영역의 스코프를 가지고, 재할당과 재선언을 할 수 있다. 그래서 var 예약어를 자칫 잘못 사용하면 예상하지 못한 프로그램 오류를 발생시킬 수 있다. 그래서 ES6부터는 var를 보완한 let과 const 예약어가 등장한다.

### let을 사용한 변수의 특징
- ES6 이전의 자바스크립트 프로그램에서는 var 예약어 만으로 변수를 선언했다. var예약어를 빠뜨리면 의도하지 않게 전역 변수가 되기도 하고, 프로그램 길이가 길이지다 보면 실수로 사용하는 변수를 재선언하거나 값을 재할당해 버리는 경우가 생기기도 한다. 그래서 ES6에서는 변수를 선언하기 위한 예약어로 let과 const가 추가 되었고, 되도록이면 var예약어는 사용하지 않을 것을 권장한다.
- 예약어 var과, let, const의 가장 큰 차이는 스코프의 범위이다. var는 함수 영역의 스코프를 가지지만 let과 const는 블록 영역의 스코프를 가진다.

#### 블록 안에서만 쓸 수 있는 변수
- let예약어로 선언한 변수는 변수를 선언한 블록({ }로 묶은 부분)에서만 유효하고 블록을 벗어나면 사용할 수 없다.

#### 재할당은 가능하지만 재선언은 할 수 없는 변수
- let예약어를 사용하면 선언한 변수는 값을 재할당할 수는 있지만 변수를 재선언할 수는 없다. 그러니 예약어 var과 같이 실수로 같은 변수의 이름을 사용할 걱정은 없다.

#### 호이스팅이 없는 변수
- var예약어를 사용한 변수는 선언하기 전에 실행하더라도 아직 할당되지 않은 자료형인 undefined값을 가질 수 있다. 바로 호이스팅 때문이다. 하지만 let예약어를 사용한 변수는 선언하기 전에 사용할 경우 오류 메세지를 나타낸다.

### const를 사용한 변수의 특징
- const 역시 let과 마찬가지로 변수를 선언할 때 사용하는 예약어 이다. 이름에서 예상할 수 있듯이 const로 선언한 변수는 상수 변수이다. 프로그램 안세서 변하지 않는 값을 뜻한다. 즉 변하지 않는 값을 변수로 선언할 때 예약어 const를 사용한다. 프로그램 안에서 특정한 상숫값을 자주 사용한다면 변수에 담아서 사용하는 것이 편리하다.
- const로 할당한 변수는 재선언하거나 재할당할 수 없으면 let 예약어를 사용한 변수처럼 블록 레벨의 스코프를 가진다.

### 자바스크립트 변수, 이렇게 사용하세요
- 자바스크립트는 유연성이 많아 편리한 언이다. 이렇게 또는 저렇게 사용해도 되는 부분이 많다. 하지만 이런 편리성은 프로그램이 커지면 가독성이나 디버깅을 하기 어렵게 만든다. 자바스크립트 문법은 벗어나지 않으면서 가독성과 디버깅을 하기 쉽도록 변수 사용 방법을 정리해 보겠다. 물론 이 외에도 여러 가지 자바스크립트 스타일 가이드를 추가할 수 있다.

#### 전역 변수는 최소한으로 사용한다.
- 전역 변수 프로그램은 어디서든 접근할 수 있으므로 편리하게 사용할 수 있다. 하지만 예상하지 못한 곳에서 값이 달리질 수 있다. 그만큼 오류가 발생할 확률이 높아지므로 전역 변수는 되도록이면 적게 사용하는 것이 좋다.

#### var변수는 함수의 시작 부분에서 선언한다.
- var를 사용한 변수는 어디에서 선언하든 상관없지만 내부에서 호이스팅이 생기므로 오류가 발생할 수 있다. 그래서 var변수는 함수 시작 부분에서 선언하는 것이 변수를 확인하기도 쉽고 오류를 줄이는 방법이다.

#### for 문에서 카운터 변수를 사용할 때는 var 예약어를 사용하지 않는다.
- for 문 안에서만 사용할 카운터 변수는 그 블록 안에서만 사용할 것이므로 가끔 var를 사용해서 선언하기도 한다. 하지만 이렇게 선언한다고 해서 블록 변수가 되는 것은 아니다. var변수는 함수 레벨의 스코프라는 것을 기억해야 한다.
- 따라서 for문의 카운터 변수는 for문 밖에서 선언하거나 아예 let을 사용해서 블록 변수로 선언하는 것이 좋다.

#### ES6을 사용한다면 예약어 var보다 let을 사용하는 것이 좋다.
- var를 사용한 변수는 재선언할 수 있으므로 실수로 같은 변수를 다시 선언하더라도 오류가 발생하지 않는다. 간혹 여러 사람이 작성한 프로그램을 합치다 보면 변수가 중복될 수도 있는데 이럴 경우 문제가 발생한다. 이럴 때 재선언할 수 없는 let을 사용하는 것이 좀 더 안전하다.

## 15-4 재사용할 수 있는 함수 만들기
- 앞에서 alert( )함수를 어떻게 사용했는지 기억하나요? 다른 메세지를 알림 창에 띄우고 싶을 때마다 alert( )함수의 괄호 안에 메세지만 바꿔서 함수를 실행했다. 이렇게 입력을 바꿔 여러 번 사용할 수 있는 성질을 함수의 '재사용성' 이라고 한다. '재사용성'은 함수의 가장 큰 장점이라 할 수 있다.

### 매개변수, 인수, return 알아보기
- addNumber( )함수를 사용해 두 수를 더하는 프로그램이다. 이때 addNumber( )함수 안에 num1=2, num2=3 처럼 두 변숫값을 고정했다 그래서 addNumber( ) 함수를 실행할 때마다 계속 같은 결괏값(5)를 보여준다. 한번만 사용하는 함수라면 상관없지만 프로그램 안에서 여러 번 사용하는 함수인데 입력값을 바꾸지 못한다면 매우 불편할 것이다. 이처럼 변숫값이 자주 변하는 상황에서 사용하려면 값을 고정하지 않고 어떤 숫자든지 2개만 addNumber로 넘겨서 더해 주면 된다.
- 즉 한수를 실행하는데 필요한 값을 함수 밖에서 제공하는 것이다. 이것을 매개변수라 하고 함수를 호출할 때 괄호 안에 매개변수의 이름을 넣는다. 매개변수에 이름을 붙이는 방법은 일반적인 변수 이름을 붙이는 것과 같다. 매개 변수는 선언된 함수 안에서만 사용하며, 매개변수를 여러 개 사용할 때는 배개변수 이름 사이에 쉼표를 찍어 나열한다.

### 매개변수 기본값 지정하기
- ES6부터는 함수에서 매개변수를 선언할 때 기본값을 지정하는 기능도 생겼다. 예를 들어 다음과 같이 multiple( ) 함수에서 매개변수 b와 c의 변숫값을 넘겨받지 못했을 때 기본값을 사용한다.
```
	function mutiple(a, b = 5, c = 10) { // b = 5, c = 10으로 기본값 지정
		return a * b + c;
	}
```
- 이렇게 매개변수의 기본값을 지정한 multiple( ) 함수를 다음과 같이 호출할 수 있다. 이때 넘겨받는 인수에 따라 기본값을 사용한다.


## 15-5 함수 표현식
- 지금까지 살펴본 함수의 사용 방법은 함수명을 선언하고 그 이름을 사용해 호출한다. 이 방법은 함수 이름만 알면 어디서나 호출해서 실행할 수 있어서 많이 사용한다. 이 밖에 따로 함수 이름을 지정하지 않고 사용하거나, 함수를 호출하지 않고 바로 실행하는 방법도 있다.

### 익명 함수
- 익명 함수는 이름이 없는 함수를 말한다. 즉, 익명 함수를 선언할 때는 이름을 붙이지 않는다. 예를 들어 앞에서 살펴봤던 addNumber( )함수를 다음과 같이 이름 없이 선언할 수 있다.
```
	function(a, b) { //  익명 함수 선언
		return a + b
	}
```
- 익명 함수는 함수 자체가 식이므로 함수를 변수에 할당할 수 있으며 또한 다른 함수의 매개변수로 사용할 수 있다.
```
	var sum = function(a, b){
		return a + b;
	}
```

### 즉시 실행 함수
- 일반적으로 함수는 선언하고 필요할 때마다 호출해서 실행하는 방법을 많이 사용한다. 하지만 한 번만 실행하는 함수라면 함수를 정의하면서 동시에 실행할 수 있다. 바로 즉시 실행 함수이다. 즉시 실행 함수는 실행하는 순간에 자바스크립트 해석기에서 함수를 해석한다.
- 즉시 실행 함수의 기본 형식은 다음과 같다. 함수를 식 형태로 선언하므로 마지막에 세미콜론(;)을 붙인다.
```
	기본형 (function(){
		명령
	}());
```

### 화살표 함수
- ES6 버전부터는 => 표기법을 사용해 함수 선언을 좀더 간단하게 작성할 수 있다. 이 방법은 간단히 화살표 함수라고 하는데 익명 함수에서만 사용할 수 있다. 화살표 함수의 기본 형식은 다음과 같이 매개변수와 함수 내용으로 구성된다.
```
	기본형 (매개변수) => {함수 내용}
```
- 지금부터 매개변수의 개수에 따라 함수를 작성하는 방법과 화살표 함수의 표기법을 간단히 살펴보겠다.

#### 매개변수가 없을 경우
- 매개 변수가 없는 경우 매개변수를 넣는 괄호 안은 비워 둔다. 예를 들어 매개변수 없이 간단한 인사말을 화면에 표시하는 함수는 다음과 같이 작성할 수 있다.
```
	const hi = frunction() {
		return "안녕하세요"
	}
```
- 이 함수를 화살표 함수로 작성하면 다음과 같다
```
	const hi = ( ) => { return "안녕하세요" }
```
- 그리고 중괄호 안에 함수 내용이 한 줄뿐이라면 중괄호를 생략해서 다음과 같이 작성할 수도 있다. 이때 return 문은 생략된 것으로 간주한다.
```
	const hi = ( ) => "안녕하세요"
```

#### 매개변수가 1개인 경우
- 매개변수가 하나인 경우 매개변수의 괄호는 생략할 수 있다.
```
	let hi = function(user) {
		document.write(user + "님 안녕하세요");
	}
```
- 변경
```
	let hi = user => { document.write(user + "님, 안녕하세요"); }
```

#### 매개변수가 2개 이상인 경우
- 매개변수가 둘 이상인 경우 화살표 함수는 (매개변수) => {...}처럼 사용한다.
```
	let sum = (a, b) => a + b;
```

## 15-6 이벤트와 이벤트 처리기
- 대부분의 함수는 사용자가 화면에서 버튼을 클릭하거나 항목을 선택했을 때 실행된다. 이처럼 버튼을 클릭하거나 항목을 선택하는 것을 '이벤트'라고 한다. 그리고 이벤트가 발생했을 때 실행하는 함수를 '이벤트 처리기'라고 한다. 여기에서는 자바스크립트에서 사용하는 이벤트의 종류와 이벤트 처리기를 연결하는 방법을 알아보겠다.

### 이벤트 알아보기
- 인터넷 초기 시절에 웹 페이지는 텍스트와 이미지를 적정히 배열해 놓고 정보를 제공하는 것만으로도 충분했지만 요즘은 그렇지 않다. 메인 메뉴를 클릭하면 서브메뉴가 자연스럽게 펼쳐지는 것은 기본이고, 어떤 사이트는 페이지 로딩이 끝나면 배경 화면이 움직이기도 한다.
- 이런 효과는 이벤트 개념이 도입되면서 새롭게 구현된 것이다. 웹 브라우저를 기본으로 실행하는 자바스크립트에서 이베트는 중요한 개념이다.
- 이벤트는 웹 브라우거나 사용자가 행하는 어떤 동작을 말한다. 예를 들어 비코드에서 키를 누르는 것도, 웹 브라우저에서 새로운 페이지를 불러오는 것도 이벤트이다. 하지만 웹 브라우저 안에서 이루어지는 모든 동작이 이벤트는 아니다. 이벤트는 웹 페이지를 읽어 오거나 링크를 클릭하는 것처럼  웹 문서 영역 안에서 이루어지는 동작만을 말한다. 따라서 사용자가 웹 문서 영역을 벗어나 클릭하는 행위는 이벤트가 아니다. 예를 들어 브라우저 창 맨 위의 제목 표시줄을 클릭하는 것은 이벤트라고 하지 않는다.
- 자바스크립트의 이벤트는 주로 마우스나 키보드를 사용할 때, 웹 문서를 불러올 때 폼(form)에 내용을 입력할 때 발생한다.

#### 마우스 이벤트
- 마우스 이벤트는 마우스를 이용해서 버튼이나 휠 버튼을 조작할 때 발생한다.
|종류|설명|
|-----|-----|
|click| 사용자가 HTML 요소를 클릭할 때 이벤트가 발생한다.|
|dblclick|사용자가 HTML요소를 더블클릭할 때 이벤트가 발생한다.|
|mousedown|사용자가 요소 위에서 마우스 버튼을 눌렀을 때 이벤트가 발생한다.
|mousemove|사용자가 요소 위에서 마우스 포인터를 움직일 때 이벤트가 발생한다.
|mouseover|마우스 포인터가 요소 위로 옮겨질 때 이벤트가 발생한다.
|mouseout|마우스 포인터가 요소를 벗어날 때 이벤트가 발생한다.
|mouseup|사용자가 요소 위에 놓은 마우스 버튼에서 손을 땔 때 이벤트가 발생한다.|

#### 키보드 이벤트
- 키보드 이벤트는 키보드에서 특정 키를 조작할 때 발생한다
|종류|설명|
|-----|-----|
|keydown|사용자가 키를 누르는 동안 이벤트가 발생한다.|
|keypress|사용자가 키를 눌렀을 때 이벤트가 발생한다.|
|keyup|사용자가 키에서 손을 땔 때 이벤트가 발생한다.|

#### 문서 로딩 이벤트
- 서버에서 웹 문서를 가져오거나 문서를 위 아래로 스크롤하는 등 웹 문서를 브라우저 창에 보여 주는 것과 관련된 이벤트이다.
|종류|설명|
|-----|-----|
|abort|문서가 완전히 로딩되기 전에 불러오기를 멈췄을ㄹ 때 이벤트가 발생한다.|
|error|문서가 정확히 로딩되지 않았을 때 이벤트가 발생한다.|
|load|문서 로딩이 끝나면 이벤트가 발생한다.|
|resize|문서 화면 크기가 바뀌었을때 이벤트가 발생한다.|
|scroll|문서 화면이 스크롤되었을 때 이벤트가 발생한다.
|unload|문서에서 벗어날 때 이벤트가 발생한다.|

#### 폼 이벤트
- 폼은 로그인, 검색, 게시판, 설문 조사처럼 사용자가 입력하는 모든 요소를 가리킨다.
|종류|설명|
|-----|-----|
|blur|폼 요소에 포커스를 잃었을 때 이벤트가 발생한다.|
|change|목록이나 체크 상태 등이 변경되면 이벤트가 발생한다.|
|focus|폼 요소에 포커스가 놓였을 때 이벤트가 발생한다.|
|reset|폼이 리셋되었을 때 이벤트가 발생한다.
|submit|submit 버튼이 클릭했을 때 이벤트가 발생한다.

### 이벤트 처리기 알아보기
- 이벤트 에서는 작은 이미지를 클릭하면 큰 이미지를 보여 주거나 폼에서 항목을 선택하면 해당 페이지로 이동하는 등 여러 가지 동작을 실행한다.
- 웹 문서에서 이벤트가 발생하면 처리하는 함수를 이벤트 처리기 또는 이벤트 핸들러 라고한다.
- 이벤트를 처리하는 가장 기본적인 방법은 이벤트가 발생한 HTML 태그에 이벤트 처리기를 직접 연결하는 것이다. 이 방법은 자바스크립트 초기 버전부터 사용했으며 지금도 많이 사용하고 있다.
- 이벤트 처리기의 기본 형식은 다므과 같다. 먼저 HTML 태그안에서 'on' 다음에 '이벤트명'을 붙여서 속성 이름을 만들고, 그 다음에 실행할 이벤트 처리기의 함수명을 작성하면 된다.
```
	기본형 \<태그 on이벤트명 = "함수명">
```

## 15-7 DOM을 이용한 이벤트 처리기
- 15-6절에서 살펴본 것처럼 HTML 요소에 이벤트 처리기를 지정하면 태그 속성과 자바스크립트 소스가 섞인다. 그래서 자바스크립트를 수정하면 HTML의 태그와 속성을 하나씩 찾아봐야 한다. 하지만 DOM을 이용하면 이벤트 처리기를 지정하면 태그와 자바스크립트 소스를 분리해서 보기 좋게 사용할 수 있다.

- 지금까지 이벤트 처리기를 지정하는 방법은 HTML이 주인이 되어 자바스크립트의 함수를 불러와서 사용했다. 하지만 DOM을 사용하면 자바스크립트가 주인이 되어 HTML의 요소를 가져와서 이벤트 처리기를 연결한다. HTML과 자바스크립트 중에서 어느 쪽을 중심으로 잡는가에 따라 지정하는 방법이 다르다는 것을 알면 된다.
```
	기본형 웹 요소.onclick = 함수;
```
- 자바스크립트에서는 웹 요소를 여러 방법으로 가져올 수 있는데 그중에서 함수 querySelector( )를 사용하여 가져오는 것이 쉽다. querySelector( )의 괄호 안에는 클래스 이름이나 id 이름 또는 다양한 선택자를 넣을 수 있다.


